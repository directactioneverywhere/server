server {
    listen 80;
    server_name _;


    location /maps/ {
        root /var/www;
    }

    location /health {
        proxy_pass http://localhost:8001;
        include proxy_params;
    }

    location /facebook/ {
        if ($http_origin ~* '^https?:\/\/(www\.)?directactioneverywhere(\.squarespace)?\.com$'){
            add_header 'Access-Control-Allow-Origin' $http_origin;
        }

        proxy_pass http://localhost:8002;
        include proxy_params;
    }

    location /pledge/ {
        if ($http_origin ~* '^https?:\/\/(www\.)?liberationpledge\.com$'){
            add_header 'Access-Control-Allow-Origin' $http_origin;
        }

        proxy_pass http://localhost:8003;
        include proxy_params;
    }

    location / {
        return 404;
    }
}
